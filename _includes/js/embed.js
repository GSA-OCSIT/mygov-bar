/*! MyGovBar — 0.0.2 — 2013-01-04 16:2 */
(function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};e={interval_id:void 0,last_hash:void 0,cache_bust:1,attached_callback:void 0,window:this,postMessage:function(t,e,n){return e?(n=n||parent,window.postMessage?n.postMessage(t,e.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):e?n.location=e.replace(/#.*$/,"")+"#"+ +new Date+cache_bust++ +"&"+t:void 0):void 0},receiveMessage:function(t,e){var n,r;return window.postMessage?(t&&(n=function(n){return"string"==typeof e&&n.origin!==e||"[object Function]"===Object.prototype.toString.call(e)&&e(n.origin)===!1?(console.log("cross iframe request blocked. Domains "+n.origin+" and "+e+" must match."),!1):t(n)}),window.addEventListener?window[t?"addEventListener":"removeEventListener"]("message",n,!1):window[t?"attachEvent":"detachEvent"]("onmessage",n)):(r&&clearInterval(r),r=null,t?r=setInterval(function(){var e,n,r;return e=document.location.hash,r=/^#?\d+&/,e!==n&&r.test(e)?(n=e,t({data:e.replace(r,"")})):void 0},100):void 0)}},t=function(){function t(){this.recieve=n(this.recieve,this),this.show=n(this.show,this),this.onResize=n(this.onResize,this),this.onScroll=n(this.onScroll,this),this.addEvent(document,"scroll",this.onScroll),this.addEvent(window,"resize",this.onResize),this.onResize()}return t.prototype.rootUrl="{{ site.url }}",t.prototype.scrollTrigger="{{ site.trigger }}",t.prototype.widthMinimized="{{ site.widthMinimized }}",t.prototype.minWidth="{{ site.minWidth }}",t.prototype.animationSpeed="{{ site.animation_speed }}",t.prototype.style={position:"fixed",bottom:0,left:0,background:"transparent",width:"{{ site.widthMinimized }}",display:"none",height:"268px",border:0,"z-index":9999999,overflow:"hidden"},t.prototype.isLoaded=!1,t.prototype.id="myGovBar",t.prototype.el=!1,t.prototype.state="hidden",t.prototype.addEvent=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):void 0},t.prototype.onScroll=function(){return this.offsetBottom()>this.scrollTrigger?this.show():this.offsetBottom()<this.scrollTrigger?this.hide():void 0},t.prototype.onResize=function(){return window.innerWidth<this.minWidth&&"shown"===this.state?(this.maximize(),this.send("expanded")):void 0},t.prototype.positionTop=function(){return null!=window.pageYOffset?window.pageYOffset:null!=html.scrollTop?html.scrollTop:null!=body.scrollTop?body.scrollTop:0},t.prototype.pageHeight=function(){return Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight))},t.prototype.windowHeight=function(){return window.innerHeight||html.clientHeight||body.clientHeight||screen.availHeight},t.prototype.offsetBottom=function(){return 100*(this.positionTop()+this.windowHeight())/this.pageHeight()},t.prototype.load=function(t){var n,r,o;this.el=document.createElement("iframe"),this.el.name=this.id,this.el.id=this.id,this.el.src=this.rootUrl+"/mygov-bar.html#"+encodeURIComponent(document.location.href),o=this.style;for(n in o)r=o[n],this.el.style[n]=r;return document.body.appendChild(this.el),e.receiveMessage(this.recieve,this.rootUrl.match(/([^:]+:\/\/.[^/]+)/)[1]),this.isLoaded=!0,null!=t?t():void 0},t.prototype.setWidth=function(t){return this.el.style.width=t},t.prototype.setHeight=function(t){return this.el.style.height=t},t.prototype.show=function(){return"shown"!==this.state?this.isLoaded?(this.el.style.display="block",this.setState("shown")):this.load(this.show):void 0},t.prototype.hide=function(){var t=this;if("hidden"!==this.state)return this.setState("hidden"),setTimeout(function(){return(t.state="hidden")?t.el.style.display="none":void 0},this.animationSpeed)},t.prototype.maximize=function(){return this.setWidth("100%")},t.prototype.minimize=function(){return this.setWidth(this.widthMinimized)},t.prototype.send=function(t){var n;return n=document.getElementById(this.id),e.postMessage(t,n.src,frames.myGovBar)},t.prototype.recieve=function(t){switch(t=t.data.split("-"),t[0]){case"mini":return this.minimize();case"expanded":return this.maximize();case"height":return this.setHeight(t[1])}},t.prototype.setState=function(t){return this.state=t,this.send(t)},t}(),window.MyGovLoader=new t}).call(this);