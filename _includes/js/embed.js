// Generated by CoffeeScript 1.4.0
(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};t={interval_id:void 0,last_hash:void 0,cache_bust:1,attached_callback:void 0,window:this,postMessage:function(e,t,n){if(!t)return;n=n||parent;if(window.postMessage)return n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));if(t)return n.location=t.replace(/#.*$/,"")+"#"+ +(new Date)+cache_bust++ +"&"+e},receiveMessage:function(e,t){var n,r;if(window.postMessage)return e&&(n=function(n){return typeof t=="string"&&n.origin!==t||Object.prototype.toString.call(t)==="[object Function]"&&t(n.origin)===!1?(console.log("cross iframe request blocked. Domains "+n.origin+" and "+t+" must match."),!1):e(n)}),window.addEventListener?window[e?"addEventListener":"removeEventListener"]("message",n,!1):window[e?"attachEvent":"detachEvent"]("onmessage",n);r&&clearInterval(r),r=null;if(e)return r=setInterval(function(){var t,n,r;t=document.location.hash,r=/^#?\d+&/;if(t!==n&&r.test(t))return n=t,e({data:t.replace(r,"")})},100)}},e=function(){function e(){this.recieve=n(this.recieve,this),this.onResize=n(this.onResize,this),this.onScroll=n(this.onScroll,this),this.addEvent(document,"scroll",this.onScroll),this.addEvent(window,"resize",this.onResize),this.onResize()}return e.prototype.rootUrl="{{ site.url }}",e.prototype.scrollTrigger="{{ site.trigger }}",e.prototype.widthMinimized="{{ site.widthMinimized }}",e.prototype.minWidth="{{ site.minWidth }}",e.prototype.style={position:"fixed",bottom:0,left:0,background:"transparent",width:"{{ site.widthMinimized }}",display:"none",height:"268px",border:0,"z-index":9999999,overflow:"hidden"},e.prototype.isLoaded=!1,e.prototype.id="myGovBar",e.prototype.el=!1,e.prototype.addEvent=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent)return e.attachEvent("on"+t,n)},e.prototype.onScroll=function(){if(this.offsetBottom()>this.scrollTrigger)return this.show();if(this.offsetBottom()<this.scrollTrigger)return this.hide()},e.prototype.onResize=function(){if(window.innerWidth<this.minWidth&&this.isShown())return this.maximize(),this.send("expanded")},e.prototype.positionTop=function(){return window.pageYOffset!=null?window.pageYOffset:html.scrollTop!=null?html.scrollTop:body.scrollTop!=null?body.scrollTop:0},e.prototype.pageHeight=function(){return Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight))},e.prototype.windowHeight=function(){return window.innerHeight||html.clientHeight||body.clientHeight||screen.availHeight},e.prototype.offsetBottom=function(){return 100*(this.positionTop()+this.windowHeight())/this.pageHeight()},e.prototype.load=function(){var e,n,r;this.el=document.createElement("iframe"),this.el.name=this.id,this.el.id=this.id,this.el.src=this.rootUrl+"/mygov-bar.html#"+encodeURIComponent(document.location.href),r=this.style;for(e in r)n=r[e],this.el.style[e]=n;return document.body.appendChild(this.el),t.receiveMessage(this.recieve,this.rootUrl.match(/([^:]+:\/\/.[^/]+)/)[1]),this.isLoaded=!0},e.prototype.isHidden=function(){return this.el?this.el.style.display==="none":!0},e.prototype.isShown=function(){return!this.isHidden()},e.prototype.isMinimized=function(){return this.el.style.widht===this.widthMinimized},e.prototype.setWidth=function(e){return this.el.style.width=e},e.prototype.setHeight=function(e){return this.el.style.height=e},e.prototype.show=function(){if(this.isShown())return;return this.isLoaded||this.load(),this.el.style.display="block",this.send("mini")},e.prototype.hide=function(){var e=this;if(this.isHidden())return;return this.send("hidden"),setTimeout(function(){return e.el.style.display="none"},1200)},e.prototype.maximize=function(){return this.setWidth("100%")},e.prototype.minimize=function(){return this.setWidth(this.widthMinimized)},e.prototype.send=function(e){var n;return n=document.getElementById(this.id),t.postMessage(e,n.src,frames.myGovBar)},e.prototype.recieve=function(e){e=e.data.split("-");switch(e[0]){case"mini":return this.minimize();case"expanded":return this.maximize();case"height":return this.setHeight(e[1])}},e}(),window.MyGovLoader=new e}).call(this);